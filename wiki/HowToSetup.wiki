#summary How to setup AndroBOINC
#labels Phase-Deploy

= Introduction =

This page gives description about basic steps needed to make AndroBOINC working.

User needs to:
 * Set [http://en.wikipedia.org/wiki/BOINC BOINC] client so it can start up automatically
 * Protect BOINC client by password
 * Attach to BOINC projects from PC (this cannot be done from AndroBOINC yet)
 * Make BOINC client accessible by network
 * Install AndroBOINC on Android device
 * Set up AndroBOINC, so it can communicate with BOINC client(s)


= BOINC client configuration =

AndroBOINC is remote control for BOINC core client. The BOINC core client must be set up correctly first. This chapters shows basic step-by-step example, suitable for unexperienced users. Experienced BOINC users have probably customized their BOINC client already and need only update its configurations, which can also be done based on this example. 


== BOINC setup on Linux ==

This example works for Debian or Ubuntu. The exact procedure may slightly differ for other Linux distributions.

=== 1. Install BOINC client ===

First, the BOINC core client must be set up the right way. The easiest is to use packages from distribution. 
Run following command from terminal:
{{{
sudo apt-get install boinc-client boinc-manager
}}}
_Hint: If the machine is headless server (no GUI needed on that machine), the package boinc-manager can be omitted. But another machine with BOINC manager is still needed in this case (to attach to project) and this kind of setup is not suitable for unexperienced users._

Now the BOINC client will start automatically when computer starts. The configuration file for BOINC client startup is {{{/etc/default/boinc-client}}}, client runs in directory {{{/var/lib/boinc-client}}} and various options for client are set in the files in directory {{{/etc/boinc-client}}}.

=== 2. Protect BOINC client by password ===

Now set up password to protect your BOINC client, so only authorized managers can control it:
{{{
sudo gedit /etc/boinc-client/gui_rpc_auth.cfg
}}}
_Hint: You can also use your favorite editor instead of gedit._

Then write your chosen password (one line only) in the editor window, save file and exit editor.

*Note: Setting of password is important! Do not neglect this point. Make sure your BOINC client is secure before making it accessible from the network*

To apply the settings, we need to restart BOINC client:
{{{
sudo /etc/init.d/boinc-client restart
}}}

=== 3. Atach to BOINC projects ===

Next we will use normal BOINC Manager to manage BOINC core client. We will actually achieve 2 things in this step:
 # Attach to BOINC project(s)
 # Verify that the password that we set up is working correctly

BOINC manager can be started from desktop menu. On Ubuntu it is located in {{{Applications->System Tools}}}. The manager can be also started from terminal window by typing:
{{{
boincmgr
}}}

After start, the BOINC manager can be automatically connected to the BOINC client on the same machine (usually the case when starting from menu and BOINC client uses standard port 31416). In such case attach to project is offered for newly installed BOINC client.

It is also possible, that manager cannot find the client right after starting. In such case switch to Advanced view of manager and then use menu {{{Advanced->Select computer...}}} and in the dialog use host name (or IP-address instead) and the password chosen. If BOINC client was configured to use non-standard port (see also below), the port can be also specified, for example: {{{127.0.0.1:31418}}}

In any case, connecting to client from standard manager is used to verify the password protection of the BOINC client.

=== 4. Make BOINC client accessible via network ===

Now we tell to BOINC client to listen on network:
{{{
sudo gedit /etc/default/boinc-client
}}}

On the bottom of the file there is something like:
{{{
# Here you can specify additional options to pass to the BOINC core client.
# Type 'boinc --help' or 'man boinc' for a full summary of allowed options.
#BOINC_OPTS="--allow_remote_gui_rpc"
BOINC_OPTS=""
}}}

What we need is actually mentioned in comment right above BOINC_OPTS setting (comments are starting with character {{{#}}}); We need {{{--allow_remote_gui_rpc}}}, so the end of the file will then look like:
{{{
# Here you can specify additional options to pass to the BOINC core client.
# Type 'boinc --help' or 'man boinc' for a full summary of allowed options.
#BOINC_OPTS="--allow_remote_gui_rpc"
BOINC_OPTS="--allow_remote_gui_rpc"
}}}

The BOINC core client listens by default on TCP port 31416. In case we need to use another port, we can specify it here as well, the end of file will be then:
{{{
# Here you can specify additional options to pass to the BOINC core client.
# Type 'boinc --help' or 'man boinc' for a full summary of allowed options.
#BOINC_OPTS="--allow_remote_gui_rpc"
BOINC_OPTS="--allow_remote_gui_rpc --gui_rpc_port 31417"
}}}

To apply the settings, we again need to restart BOINC client:
{{{
sudo /etc/init.d/boinc-client restart
}}}

==== Firewall ====

The access to computer can be additionally guarded by firewall. This is recommended for security. There are many firewalls out there, so settings need to be adapted accordingly. Here is simple example for {{{ufw}}}:

Check the status of firewall:
{{{
sudo ufw status
}}}
Enable firewall (this blocks access to BOINC core client by default):
{{{
sudo ufw enable
}}}
Allow access to BOINC client from any network:
{{{
sudo ufw allow 31416/tcp
}}}
_Note: If you use --gui_rpc_port, adjust port number accordingly_


== BOINC setup on Mac OS X ==

_(This section is still missing.)_


== BOINC setup on Windows ==

_(This section is still missing.)_


= Accessibility from Internet =

Today it is quite common to have several network devices at home, while using one router to access Internet. Typically the router performs [http://en.wikipedia.org/wiki/Network_address_translation network address translation (NAT)]. In such case the devices on home network are not directly accessible from Internet, so PC running BOINC core client is also inaccessible from Internet.

In some cases user may wish to have BOINC client inaccessible from Internet and use AndroBOINC only on home [http://en.wikipedia.org/wiki/WiFi WiFi] network.

But in most cases user wants to control BOINC remotely also from Internet.

To make BOINC accessible from Internet, port forwarding must be enabled on router, so when port 31416 is accessed from Internet, the connection is forwarded to the PC where the BOINC client is installed and listening on port 31416. As there are various routers with different ways how to set them up, it is not possible to describe details in this document.

After BOINC client is accessible from Internet, we must know its address to be able to connect to it. Static IP-address does not change; in this case external IP-address of router can be directly used to connect to BOINC client from Internet. For static addresses it is also easy to use normal [http://en.wikipedia.org/wiki/Domain_Name_System Domain Name System (DNS)] and access client via domain name.

With dynamic addresses it is more difficult, because address changes over time. It is still possible to set up [http://en.wikipedia.org/wiki/DDNS dynamic DNS (DDNS)] in this case.

In the worst case a small trick can be used, to find current dynamic IP-address of BOINC client: BOINC client contacts project servers periodically to get new work and report finished work. Project server stores the IP-address of a client and the address can be displayed via user's account on project's page. User must log on the project page, navigate to "Computers on this account", choose "Details" of the computer and on computer information page click on "Show IP address". The "External IP address" field shows the IP-address used by BOINC client in the latest contact, so if dynamic IP-address does not change too often, there is a good chance that this latest IP-address is still valid.


= AndroBOINC configuration =

Once the BOINC client is set up and accessible, here comes the easier part: setting the AndroBOINC.

 # Install AndroBOINC on Android device.
 # Start AndroBOINC.
 # Press {{{Menu}}} button, then select {{{Connect}}} from menu.
 # After the fresh installation the list is empty, but screen gives you hint. Press {{{Menu}}} button, then select {{{Add new host}}}.
 # Fill the form:
  * {{{Host nickname}}} is the name which will appear in lists and titles. Any name can be used, but it must be unique.
  * {{{Address}}} is either IP-address or domain name of the BOINC client - client must be reachable via this address.
  * {{{Port}}} is the port number the BOINC client is using.
  * {{{Password}}} is... well... the password. 
 # After filling the first BOINC client, it appears in list. Another BOINC client can be added by pressing {{{Menu}}} button again and filling the address of the other host.
 # Selecting the host from the list will initiate connection towards BOINC client.

After connect the BOINC client can be controlled by AndroBOINC. The list of BOINC clients is saved in AndroBOINC's database, so next time the AndroBOINC is invoked, the BOINC client can be selected directly. In case modification of previously configured host is needed (e.g. when password is changed), or if obsolete host should be removed from list, the long touch on list item will bring context menu for selected item and it can be modified or deleted then.

